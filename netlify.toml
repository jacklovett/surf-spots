[build]
  command = "npm run build"
  publish = "build/client"

[build.environment]
  NODE_VERSION = "20"
  # VITE_ prefixed variables are intentionally bundled into client-side code
  # They must be public for the browser to access them. Secured via:
  # - Mapbox tokens: URL restrictions + limited scopes in Mapbox dashboard
  # - API URL: Backend has its own authentication
  SECRETS_SCAN_OMIT_KEYS = "VITE_API_URL,VITE_MAP_ACCESS_TOKEN,BASE_URL"
  # Exclude source files where process.env.X references (not values) are normal
  SECRETS_SCAN_OMIT_PATHS = "app/**,*.md,tests/**,.github/**,.vscode/**,playwright.config.ts"

# The @netlify/remix-adapter automatically handles functions and redirects
